# 大屏统计数据接口文档

所有接口均为 GET 请求，返回 JSON 格式数据，数据结构与数据库表字段一一对应。

---

## 1. 告警统计

- **接口地址**：`/api/stat/alarm`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "statDate": "2024-07-16",
    "statYear": 2024,
    "statQuarter": 3,
    "successCount": 10,
    "suspiciousCount": 2,
    "attemptCount": 5,
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 2. 资产统计

- **接口地址**：`/api/stat/asset`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "statDate": "2024-07-16",
    "networkDevice": 10,
    "securityDevice": 5,
    "domainName": 3,
    "middleware": 2,
    "service": 8,
    "application": 4,
    "website": 6,
    "virtualDevice": 1,
    "port": 20,
    "host": 15,
    "databaseCount": 7,
    "osCount": 3,
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 3. 值班安排

- **接口地址**：`/api/stat/duty`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "orgName": "单位A",
    "leaderName": "张三",
    "leaderPhone": "13800000000",
    "dutyPerson": "李四",
    "dutyPhone": "13900000000",
    "dutyDate": "2024-07-16",
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 4. 攻击飞线

- **接口地址**：`/api/stat/attack`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "sourceIp": "1.1.1.1",
    "targetIp": "2.2.2.2",
    "sourceLocationName": "美国·洛杉矶",
    "sourceLng": 118.123456,
    "sourceLat": 34.123456,
    "targetLocationName": "中国·北京",
    "targetLng": 116.123456,
    "targetLat": 39.123456,
    "attackMethod": "DDoS",
    "targetSystem": "Linux Nginx",
    "attackTime": "2024-07-16T09:00:00",
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 5. 区域报警统计

- **接口地址**：`/api/stat/region`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "regionName": "北京",
    "regionType": "domestic",
    "alertCount": 20,
    "statDate": "2024-07-16",
    "createdAt": "2024-07-16T10:00:00"
  }
]
```

---

## 6. 系统风险评分

- **接口地址**：`/api/stat/risk`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "systemName": "系统A",
    "riskScore": 85.5,
    "scoreDate": "2024-07-16",
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 7. 安全事件

- **接口地址**：`/api/stat/security-event`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "systemName": "系统A",
    "ipAddress": "1.1.1.1",
    "eventTime": "2024-07-16T08:00:00",
    "status": "unhandled",
    "source": "IDS",
    "content": "检测到异常流量",
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 8. 漏洞记录

- **接口地址**：`/api/stat/vuln-record`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "systemName": "系统A",
    "orgName": "单位A",
    "vulnSource": "扫描",
    "vulnType": "SQL注入",
    "foundTime": "2024-07-15T10:00:00",
    "fixContent": "已修复",
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

---

## 9. 漏洞季度统计

- **接口地址**：`/api/stat/vuln-stat`
- **请求方式**：GET
- **返回示例**：

```json
[
  {
    "id": 1,
    "foundTime":"2024-07-16T10:00:00",
    "highRiskCount": 3,
    "mediumRiskCount": 5,
    "lowRiskCount": 10,
    "createdAt": "2024-07-16T10:00:00"
  }
]
```

---

## 10. 异常事件统计

- **接口地址**：`/api/stat/abnormal-event`
- **请求方式**：GET/POST
- **返回示例**：

```json
[
  {
    "id": 1,
    "statTime": "2024-07-16T10:00:00",
    "outbound": 10,
    "outsideToInside": 5,
    "lateralMove": 3,
    "other": 2,
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

- **POST 请求体示例**：

```json
{
  "statTime": "2024-07-16T10:00:00",
  "outbound": 10,
  "outsideToInside": 5,
  "lateralMove": 3,
  "other": 2
}
```

---

## 11. 外联IP统计

- **接口地址**：`/api/stat/outbound-ip`
- **请求方式**：GET/POST
- **返回示例**：

```json
[
  {
    "id": 1,
    "location": "北京",
    "isDomestic": true,
    "statTime": "2024-07-16T10:00:00",
    "ipCount": 15,
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

- **POST 请求体示例**：

```json
{
  "location": "北京",
  "isDomestic": true,
  "statTime": "2024-07-16T10:00:00",
  "ipCount": 15
}
```

---

## 12. 漏洞修复统计

- **接口地址**：`/api/stat/vuln-fix`
- **请求方式**：GET/POST
- **返回示例**：

```json
[
  {
    "id": 1,
    "statTime": "2024-07-16",
    "fixedCount": 20,
    "unfixedCount": 5,
    "createdAt": "2024-07-16T10:00:00",
    "updatedAt": "2024-07-16T10:00:00"
  }
]
```

- **POST 请求体示例**：

```json
{
  "statTime": "2024-07-16",
  "fixedCount": 20,
  "unfixedCount": 5
}
```

---

### 说明

- GET 接口返回全量数据列表。
- POST 接口用于创建新的统计记录。
- 时间字段均为 ISO8601 格式。
- `createdAt` 和 `updatedAt` 字段由系统自动维护，POST 时无需提供。
- 所有数值型字段默认值为 0。
- `isDomestic` 字段表示是否为国内IP，true 表示国内，false 表示国外。 